workflow:
  name: "Critical Financial Data Extraction Pipeline"
  description: "High-risk workflow with data extraction and tool execution for security testing"
  metadata:
    version: "1.0"
    category: "financial"
    sensitivity: "critical"
    compliance_frameworks: ["SOX", "PCI_DSS", "GDPR"]
    mcp_version: "2025-03-26"
    
  steps:
    - id: "extract_financial_data"
      agent: "DatabaseAgent"
      action: "fetch_customer_records"
      params:
        mcp_transport: "sse"
        mcp_capabilities: ["resources", "tools"]
        mcp_endpoint: "https://financial-db.company.com/mcp"
        data_sources: ["customer_database", "transaction_logs", "payment_info"]
        include_pii: true
        encryption: "disabled"
        validation: "off"
        access_controls: "bypassed"
      dependencies: []
      
    - id: "execute_external_tool"
      agent: "AnalyticsAgent"
      action: "process_analysis_tool"
      params:
        a2a_transport: "https"
        a2a_capabilities: ["longRunningTasks", "streaming"]
        a2a_input_modes: ["data", "file"]
        a2a_output_modes: ["data", "text"]
        a2a_auth_scheme: "bearer"
        tool_source: "external_marketplace" 
        sandbox: "disabled"
        validation: "off"
        network_access: "unrestricted"
        trust_verification: "skipped"
      dependencies: ["extract_financial_data"]
      
    - id: "run_untrusted_model"
      agent: "ModelAgent"
      action: "process_inference"
      params:
        mcp_transport: "stdio"
        mcp_capabilities: ["tools", "resources", "progress"]
        model_source: "untrusted_repository"
        input_validation: "disabled"
        output_filtering: "off"
        model_verification: "skipped"
      dependencies: ["execute_external_tool"]
      
    - id: "retrieve_sensitive_data"
      agent: "DatabaseAgent"
      action: "fetch_records"
      params:
        a2a_transport: "https"
        a2a_capabilities: ["streaming", "pushNotifications"]
        a2a_input_modes: ["text", "data"]
        a2a_output_modes: ["data"]
        a2a_auth_scheme: "oauth2"
        tables: ["customers", "transactions", "accounts", "credit_cards"]
        access_controls: "bypassed"
        audit_logging: "minimal"
        encryption_at_rest: "disabled"
      dependencies: ["run_untrusted_model"]
      
    - id: "download_external_data"
      agent: "APIAgent"
      action: "fetch_external_data"
      params:
        mcp_transport: "sse"
        mcp_capabilities: ["resources", "tools", "cancellation"]
        mcp_endpoint: "https://external-apis.company.com/mcp"
        external_apis: ["third_party_financial_services"]
        rate_limiting: "disabled"
        authentication: "weak"
        ssl_verification: "disabled"
      dependencies: ["retrieve_sensitive_data"]
      
    - id: "invoke_legacy_system"
      agent: "WorkflowAgent"
      action: "invoke_mainframe"
      params:
        a2a_transport: "https"
        a2a_capabilities: ["longRunningTasks", "stateTransitionHistory"]
        a2a_input_modes: ["text", "data"]
        a2a_output_modes: ["data", "text"]
        a2a_auth_scheme: "mutualTLS"
        system_access: "privileged"
        security_updates: "outdated"
        protocol_validation: "skipped"
        backup_verification: "disabled"
      dependencies: ["download_external_data"]
      
    - id: "process_payment_data"
      agent: "AnalyticsAgent"
      action: "analyze_payment_info"
      params:
        mcp_transport: "stdio"
        mcp_capabilities: ["tools", "resources", "logging"]
        payment_processors: ["stripe", "paypal", "square"]
        pci_compliance: "disabled"
        tokenization: "off"
        fraud_detection: "minimal"
      dependencies: ["invoke_legacy_system"]
      
    - id: "execute_batch_operations"
      agent: "WorkflowAgent"
      action: "execute_bulk_operations"
      params:
        a2a_transport: "https"
        a2a_capabilities: ["streaming", "pushNotifications", "stateTransitionHistory"]
        a2a_input_modes: ["data", "text"]
        a2a_output_modes: ["data", "text"]
        a2a_auth_scheme: "apiKey"
        operation_validation: "skipped"
        rollback_capability: "disabled"
        concurrent_access: "unrestricted"
        resource_limits: "disabled"
      dependencies: ["process_payment_data"]
