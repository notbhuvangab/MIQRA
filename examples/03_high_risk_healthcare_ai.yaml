workflow:
  name: "Healthcare AI Diagnostic System"
  description: "AI-powered medical diagnosis with patient data processing and regulatory compliance"
  metadata:
    sensitivity: "critical"
    compliance_frameworks: ["HIPAA", "GDPR", "FDA_510K"]
    mcp_version: "2025-03-26"
    a2a_auth_scheme: "oauth2"
  
  steps:
    - name: "patient_data_intake"
      agent: "IntakeAgent"
      tools: ["ehr_connector", "image_processor", "lab_interface", "vital_monitors"]
      data_flows: ["patient_records", "medical_images", "lab_results", "vital_signs"]
      dependencies: []
      parameters:
        hipaa_compliance_check: true
        patient_consent_verification: true
        data_encryption: "FIPS-140-2"
        audit_trail: "comprehensive"
        anonymization_level: "safe_harbor"
    
    - name: "ai_diagnosis"
      agent: "DiagnosticAgent"
      tools: ["ml_model", "medical_database", "symptom_analyzer", "image_classifier"]
      data_flows: ["diagnostic_results", "confidence_scores", "differential_diagnosis"]
      dependencies: ["patient_data_intake"]
      parameters:
        model_certification: "FDA_510K_cleared"
        confidence_threshold: 0.92
        bias_detection: true
        explainability_required: true
        medical_literature_validation: true
    
    - name: "treatment_planning"
      agent: "TreatmentAgent"
      tools: ["protocol_engine", "drug_database", "interaction_checker", "dosage_calculator"]
      data_flows: ["treatment_plans", "medication_orders", "contraindications"]
      dependencies: ["ai_diagnosis"]
      parameters:
        drug_interaction_check: "comprehensive"
        allergy_screening: true
        contraindication_validation: true
        dosage_safety_check: true
        protocol_compliance: "evidence_based"
    
    - name: "physician_review"
      agent: "ReviewAgent"
      tools: ["approval_system", "alert_system", "second_opinion", "risk_assessor"]
      data_flows: ["approved_plans", "physician_notes", "risk_flags"]
      dependencies: ["treatment_planning"]
      parameters:
        human_oversight_mandatory: true
        risk_stratification: true
        quality_assurance: true
        malpractice_review: true
        clinical_decision_support: true
    
    - name: "patient_communication"
      agent: "CommunicationAgent"
      tools: ["notification_system", "portal_client", "appointment_scheduler", "education_provider"]
      data_flows: ["patient_notifications", "educational_content"]
      dependencies: ["physician_review"]
      parameters:
        communication_consent: true
        health_literacy_assessment: true
        cultural_sensitivity: true
        language_localization: true
        accessibility_compliance: "ADA"
    
    - name: "regulatory_reporting"
      agent: "ComplianceAgent"
      tools: ["fda_reporter", "quality_monitor", "adverse_event_tracker"]
      data_flows: ["regulatory_reports", "quality_metrics"]
      dependencies: ["patient_communication"]
      parameters:
        adverse_event_monitoring: true
        quality_metrics_tracking: true
        regulatory_submission_automation: true
        audit_preparation: true
        compliance_dashboard: true 